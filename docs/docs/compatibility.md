[![logo](../logo.png)](../docs.md "documentation") 

[H]: ../docs.md        "родитель"
[P]: ../icons/progress.png  "в процессе..."
[S]: ../icons/success.png   "ошибок не обнаружено"
[E]: ../icons/empty.png     "нет данных"

[Bat-Engine]: https://github.com/Kartonagnick/bat_engine-windows
    
[![S]][H] Совместимость v0.0.1
==============================
С точки зрения технической реализации, `Vbs-Engine` - это гибрид.  
Поэтому, как и в случае с [Bat-Engine], пользователь имеет дело с батниками.  

Совместимость между этими двумя движками заключается в том,  
что с точки зрения интерфейса, для пользователя нет разницы,  
что именно здесь будет запущенно: [Bat-Engine], или `Vbs-Engine` 

```bat
call "%eDIR_BAT_ENGINE%\run.bat" ^
  "--build: cmake-makefiles"     ^
  "--configurations: all"

```

В обоих случаях пользователь имеет дело с батниками, которые принимают одни  
и те же команды. И располагаться `Vbs-Engine` тоже может по тому же самому пути,  
где раньше раполагался [Bat-Engine]. С этой точки зрения, переход на  
новый `Vbs-Engine` получается безболезненным, и прозрачным для клиентов  

Однако, если нужно одновременно держать в системе и [Bat-Engine], и `Vbs-Engine`,  
то в этом случае, что бы не поломать легаси, можно задействовать "переключатель".  
Для примера пусть будет следующая иерархия каталогов:  

```bat
C:/workspace/scripts/bat
  |--- old                содержит файлы старого Bat-Engine
  |--- new                содержит файлы нового Vbs-Engine
   `-- engine             
        |
         `-- run.bat      содержит логику переключения на разные движки
```

Идея в том, переменная `eDIR_BAT_ENGINE` по прежнему ссылается на  `C:/workspace/scripts/bat/engine`  
И тогда запуск `%eDIR_BAT_ENGINE%\run.bat` приводит к запуску неккого переключателя.  
Переключатель `engine/run.bat` решает в каких случаях нужно запустить `old/run.bat`,  
а в каких `new/run.bat`  

Например, пусть по умолчанию запускается `new/run.bat`  
Но если определить переменную: `OLD_BAT_ENGINE=ON`, тогда начнет запускаться `old/run.bat`  
Принцип переключения целиком и полностью зависит от потребностей конкретных клиентов.  
<br/>


Из нововведений
---------------
Использование гибридов позволяет сделать более сложную логику работы движка.  
Это при том, что работают гибриды гораздо быстрее, чем обычные батники.  
Соответственно, становится возможным реализовать новые более сложные фичи.  
Идея заключается в том, что бы по-максимому задействовать `Vbs-Engine`  
при написании клиентских скриптов.  

Так например, клиентский скрипт может вызвать:  
```bat
call "%eDIR_BAT_ENGINE%\run.bat" ^
  "--init: programs"             ^
  "--optional: NASM; curl"       ^
  "--required: 7z; git; 
```

Теперь, при написании очередного клиентского скрипта,  
больше не нужно каждый раз заново реализовывать код поиска различных зависимостей.  
Эту функцию можно и нужно перекладывать на единый центр управления - `Vbs-Engine`  
<br/>


История изменений 
-----------------

| *ID* |    дата    | время |     ветка      | version |  
|:----:|:----------:|:-----:|:--------------:|:-------:|  
| 0001 | 2025-02-27 | 19:30 | [#1-rep-first] |  0.0.1  |  

*ПРИМЕЧАНИЕ: под version подразумевается версия `project.root`*  

[#1-rep-first]: ../history.md#-v001-rep
